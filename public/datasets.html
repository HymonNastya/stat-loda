<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ù–∞–±–æ—Ä–∏ –¥–∞–Ω–∏—Ö</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 1s ease-in;
      position: relative;
      padding-bottom: 160px; /* –¥–ª—è —Ñ—É—Ç–µ—Ä–∞ */
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(6px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header input[type="text"] {
      padding: 12px 20px;
      border-radius: 30px;
      border: none;
      outline: none;
      font-size: 1rem;
      width: 280px;
      max-width: 60vw;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: box-shadow 0.3s ease, background-color 0.3s ease;
      color: #333;
      background-color: #fff;
    }
    header input[type="text"]::placeholder {
      color: #aaa;
    }
    header input[type="text"]:focus {
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      background-color: #fff;
    }

    header button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 24px;
      color: white;
      transition: color 0.3s ease;
    }
    header button:hover {
      color: #ffea00;
    }

    header img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 2px solid white;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
    }
    header img:hover {
      box-shadow: 0 0 10px 2px #ffea00;
    }

    nav {
      margin: 20px;
      background-color: rgba(255, 255, 255, 0.12);
      padding: 10px 20px;
      border-radius: 12px;
      backdrop-filter: blur(6px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    }

    nav a {
      color: #fff;
      text-decoration: none;
      margin: 0 12px;
      font-weight: 600;
      transition: color 0.3s ease;
      font-size: 1.1rem;
    }

    nav a:hover {
      color: #ffea00;
    }

    h1 {
      margin: 0 0 20px 0;
      font-size: 2.5rem;
      text-align: center;
      animation: slideDown 0.8s ease-out;
    }

    @keyframes slideDown {
      from { transform: translateY(-30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .add-btn {
      background-color: #fff;
      color: #333;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 20px;
      transition: background-color 0.3s ease, transform 0.2s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    .add-btn:hover {
      background-color: #333;
      color: white;
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    table {
      width: 95%;
      max-width: 1000px;
      border-collapse: collapse;
      margin: 0 auto 40px;
      background-color: rgba(255, 255, 255, 0.12);
      border-radius: 12px;
      overflow: hidden;
      backdrop-filter: blur(4px);
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.3);
      animation: fadeIn 1.2s ease-in-out;
      color: white;
    }

    th, td {
      padding: 14px 20px;
      text-align: left;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    th {
      background-color: rgba(255, 255, 255, 0.18);
      font-weight: bold;
    }

    tr:hover {
      background-color: rgba(255, 255, 255, 0.12);
      transition: background-color 0.3s ease;
    }

    a.link {
      color: #ffea00;
      text-decoration: none;
      font-weight: bold;
    }

    a.link:hover {
      text-decoration: underline;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: rgba(255,255,255,0.07);
      backdrop-filter: blur(8px);
      padding: 18px 24px;
      color: #ccc;
      font-size: 0.82rem;
      text-align: center;
      line-height: 1.5;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.15);
      user-select: none;
      pointer-events: none; /* —â–æ–± –Ω–µ –∑–∞–≤–∞–∂–∞–≤ –∫–ª—ñ–∫–∞–º –ø–æ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ */
      z-index: 100;
      font-style: italic;
      max-height: 140px;
      overflow-y: auto;
    }

    footer a {
      color: #ffea00;
      text-decoration: underline;
      pointer-events: auto; /* –ø–æ—Å–∏–ª–∞–Ω–Ω—è –∫–ª—ñ–∫–∞–±–µ–ª—å–Ω—ñ */
      transition: color 0.3s ease;
    }
    footer a:hover {
      color: #fff;
    }

    .dark-theme {
      background: #111;
      color: #eee;
    }

    .dark-theme a { color: #aeeaff; }

    .dark-theme header, .dark-theme nav, .dark-theme footer {
      background-color: rgba(255,255,255,0.04);
    }

    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }

      thead {
        display: none;
      }

      td {
        padding: 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        position: relative;
      }

      td::before {
        content: attr(data-label);
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
        color: #ffea00;
      }
    }
  </style>
</head>
<body>
  <header>
    <input type="text" placeholder="–©–æ–± –ø–æ—á–∞—Ç–∏ –ø–æ—à—É–∫, –≤–≤–µ–¥—ñ—Ç—å –∑–∞–ø–∏—Ç —Ç—É—Ç" />
    <div style="display: flex; align-items: center; gap: 16px;">
      <button id="themeToggle" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">üåì</button>
      <a href="profile.html" title="–û—Å–æ–±–∏—Å—Ç–∏–π –ø—Ä–æ—Ñ—ñ–ª—å">
        <img src="https://cdn-icons-png.flaticon.com/512/1077/1077063.png" alt="–ü—Ä–æ—Ñ—ñ–ª—å">
      </a>
    </div>
  </header>

  <nav>
    <a href="communities.html">–ì–æ–ª–æ–≤–Ω–∞</a>
    <a href="districts.html">–†–∞–π–æ–Ω–∏</a>
    <a href="districts.html">–ì—Ä–æ–º–∞–¥–∏</a>
    <a href="datasets.html">–ù–∞–±–æ—Ä–∏ –¥–∞–Ω–∏—Ö</a>
    <a href="news.html">–ù–æ–≤–∏–Ω–∏</a>
  </nav>

  <h1>–ù–∞–±–æ—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –¥–∞–Ω–∏—Ö</h1>

  <button class="add-btn" onclick="location.href='/datasets/new'">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –Ω–∞–±—ñ—Ä</button>

  <table>
    <thead>
      <tr>
        <th>–ù–∞–∑–≤–∞</th>
        <th>–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è</th>
        <th>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
        <th>–§–∞–π–ª–∏</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td data-label="–ù–∞–∑–≤–∞">–ë—é–¥–∂–µ—Ç –≥—Ä–æ–º–∞–¥</td>
        <td data-label="–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è">–°—Ç–∞—Ä–æ—Å–∞–º–±—ñ—Ä—Å—å–∫–∞ –≥—Ä–æ–º–∞–¥–∞</td>
        <td data-label="–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è">2024-12-10</td>
        <td data-label="–§–∞–π–ª–∏"><a class="link" href="#">3 —Ä–µ—Å—É—Ä—Å–∏</a></td>
      </tr>
      <tr>
        <td data-label="–ù–∞–∑–≤–∞">–ó–∞–∫–ª–∞–¥–∏ –æ—Ö–æ—Ä–æ–Ω–∏ –∑–¥–æ—Ä–æ–≤‚Äô—è</td>
        <td data-label="–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è">–ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞ –≥—Ä–æ–º–∞–¥–∞</td>
        <td data-label="–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è">2025-01-05</td>
        <td data-label="–§–∞–π–ª–∏"><a class="link" href="#">5 —Ä–µ—Å—É—Ä—Å—ñ–≤</a></td>
      </tr>
      <!-- –Ü–Ω—à—ñ –Ω–∞–±–æ—Ä–∏ -->
    </tbody>
  </table>

  <footer>
    <p><strong>stat.loda.gov.ua</strong></p>
    <p>–õ—å–≤—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å, –º. –õ—å–≤—ñ–≤, –≤—É–ª. –í. –í–∏–Ω–Ω–∏—á–µ–Ω–∫–∞, 12 (2 –ø–æ–≤–µ—Ä—Ö)</p>
    <p>–¢–µ–ª–µ—Ñ–æ–Ω: <a href="tel:+380322752774" style="color:#ffea00;">+380322752774</a></p>
    <p>–Ø–∫—â–æ –≤–∏ –º–∞—î—Ç–µ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è –∞–±–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó, –±—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞–ø–∏—à—ñ—Ç—å –Ω–∞–º: 
      <a href="mailto:thedigital@loda.gov.ua">thedigital@loda.gov.ua</a>
    </p>
    <p>–°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –Ω–∞–º–∏:</p>
    <p>¬© –ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è–º –∑ –ø–∏—Ç–∞–Ω—å —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É –õ—å–≤—ñ–≤—Å—å–∫–æ—ó –û–î–ê –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–∏ "–¶–∏—Ñ—Ä–æ–≤–∞ –õ—å–≤—ñ–≤—â–∏–Ω–∞" 2022‚Äì2024</p>
    <p>–ö–æ–Ω—Ç–µ–Ω—Ç –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–æ –∑–∞ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer">CC BY 4.0</a>, —è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ —ñ–Ω—à–µ.</p>
    <p><em>–ü—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å–∞–π—Ç –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–µ.</em></p>
  </footer>


  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const searchInput = document.querySelector('header input[type="text"]');
      const rows = document.querySelectorAll('tbody tr');
  
      searchInput.addEventListener('input', () => {
        const query = searchInput.value.toLowerCase();
  
        rows.forEach(row => {
          const rowText = row.textContent.toLowerCase();
          row.style.display = rowText.includes(query) ? '' : 'none';
        });
      });
    });
  </script>


  <script>
    const toggle = document.getElementById('themeToggle');
    toggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
    });

    window.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('theme');
      if (saved === 'dark') document.body.classList.add('dark-theme');
    });
  </script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tbody = document.getElementById('datasets-tbody');
    const searchInput = document.querySelector('header input[type="text"]');

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä—É –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö
    function renderDatasets(datasets) {
      tbody.innerHTML = ''; // –æ—á–∏—â–∞—î–º–æ —Ç–∞–±–ª–∏—Ü—é

      datasets.forEach(dataset => {
        // –§–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∞ –¥–∞—Ç–∞
        const createdAt = dataset.created_at ? new Date(dataset.created_at).toISOString().slice(0,10) : '-';

        // –ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —É dataset –º–∞—î –ø–æ–ª–µ org_name, –∞–±–æ –º–æ–∂–Ω–∞ –ø—ñ–¥–∫–æ—Ä–∏–≥—É–≤–∞—Ç–∏ –ø—ñ–¥ —Ç–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
        const orgName = dataset.org_name || '‚Äî';

        // –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ—Å—É—Ä—Å—ñ–≤ (—Ñ–∞–π–ª—ñ–≤) ‚Äî –∞–±–æ dataset.resources_count (–ø–æ—Ç—Ä—ñ–±–Ω–æ –≤ API –∑—Ä–æ–±–∏—Ç–∏)
        const resourcesCount = dataset.resources_count || 0;

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td data-label="–ù–∞–∑–≤–∞">${dataset.title}</td>
          <td data-label="–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è">${orgName}</td>
          <td data-label="–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è">${createdAt}</td>
          <td data-label="–§–∞–π–ª–∏"><a href="#" class="link">${resourcesCount} —Ä–µ—Å—É—Ä—Å${resourcesCount === 1 ? '' : '—ñ–≤'}</a></td>
        `;
        tbody.appendChild(tr);
      });
    }

    // –§—ñ–ª—å—Ç—Ä —Ç–∞–±–ª–∏—Ü—ñ –∑–∞ –ø–æ—à—É–∫–æ–º
    function filterTable() {
      const query = searchInput.value.toLowerCase();
      const rows = tbody.querySelectorAll('tr');

      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(query) ? '' : 'none';
      });
    }

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ API
    async function loadDatasets() {
      try {
        const response = await fetch('/api/datasets');
        if (!response.ok) throw new Error('–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ');
        const data = await response.json();

        renderDatasets(data);
        filterTable(); // –¥–ª—è –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ –≤–∂–µ —î —Ç–µ–∫—Å—Ç —É –ø–æ–ª—ñ –ø–æ—à—É–∫—É
      } catch (error) {
        tbody.innerHTML = `<tr><td colspan="4" style="color: #ffea00; text-align:center;">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ</td></tr>`;
        console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –Ω–∞–±–æ—Ä—ñ–≤ –¥–∞–Ω–∏—Ö:', error);
      }
    }

    searchInput.addEventListener('input', filterTable);

    loadDatasets();
  });
</script>

</body>
</html>
